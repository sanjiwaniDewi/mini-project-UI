const data = [
    {
        id: "uuid1",
        type: "Korean Bowls",
        name: "Korean bibimbab",
        price: 25000,
        purches: 745,
        img: "../asset/images/menu/korea/63d20fac11f7cf217c8b9482343aa610.jpg",
        ingrediance: [
            "onion",
            "gochujang pase",
            "beef",
            "rice",
            "garlic",
            "ginger",
        ],
        description:
            "deep fried beef with onion and gocujang pase and rice with aromatic ginger",
    },
    {
        id: "uuid2",
        type: "Korean Bowls",
        name: "Premium korean bibimbab",
        price: 25000,
        purches: 645,
        img: "../asset/images/menu/korea/63d20fac11f7cf217c8b9482343aa610.jpg",
        ingrediance: [
            "onion",
            "gochujang pase",
            "beef",
            "rice",
            "garlic",
            "ginger",
        ],
        description:
            "deep fried beef with onion and gocujang pase and rice with aromatic ginger",
    },
    {
        id: "uuid3",
        type: "Korean Bowls",
        name: "Korean Salmon Gochujang",
        price: 25000,
        purches: 545,
        img: "../asset/images/menu/korea/63d20fac11f7cf217c8b9482343aa610.jpg",
        ingrediance: [
            "onion",
            "gochujang pase",
            "beef",
            "rice",
            "garlic",
            "ginger",
        ],
        description:
            "deep fried beef with onion and gocujang pase and rice with aromatic ginger",
    },
    {
        id: "uuid4",
        type: "Japanese Bowls",
        name: "Curry Bowls",
        price: 25000,
        purches: 245,
        img: "../asset/images/menu/japan/japanese.jpeg",
        ingrediance: [
            "onion",
            "gochujang pase",
            "beef",
            "rice",
            "garlic",
            "ginger",
        ],
        description:
            "deep fried beef with onion and gocujang pase and rice with aromatic ginger",
    },
    {
        id: "uuid5",
        type: "Japanese Bowls",
        name: "Salmon Mentai Bowls",
        price: 25000,
        purches: 545,
        img: "../asset/images/menu/japan/6df188d8033561c02b106b5dfcbb7610.jpg",
        ingrediance: [
            "onion",
            "gochujang pase",
            "beef",
            "rice",
            "garlic",
            "ginger",
        ],
        description:
            "deep fried beef with onion and gocujang pase and rice with aromatic ginger",
    },

    {
        id: "uuid6",
        type: "Sushi",
        name: "Salmon Mentai Bowls",
        price: 25000,
        purches: 145,
        img: "../asset/images/menu/japan/6df188d8033561c02b106b5dfcbb7610.jpg",
        ingrediance: [
            "onion",
            "gochujang pase",
            "beef",
            "rice",
            "garlic",
            "ginger",
        ],
        description:
            "deep fried beef with onion and gocujang pase and rice with aromatic ginger",
    },
    {
        id: "uuid7",
        type: "Sushi",
        name: "Salmon Mentai Bowls",
        price: 25000,
        purches: 145,
        img: "../asset/images/menu/japan/6df188d8033561c02b106b5dfcbb7610.jpg",
        ingrediance: [
            "onion",
            "gochujang pase",
            "beef",
            "rice",
            "garlic",
            "ginger",
        ],
        description:
            "deep fried beef with onion and gocujang pase and rice with aromatic ginger",
    },
    {
        id: "uuid8",
        type: "Sushi",
        name: "Salmon Mentai Bowls",
        price: 25000,
        purches: 145,
        img: "../asset/images/menu/japan/6df188d8033561c02b106b5dfcbb7610.jpg",
        ingrediance: [
            "onion",
            "gochujang pase",
            "beef",
            "rice",
            "garlic",
            "ginger",
        ],
        description:
            "deep fried beef with onion and gocujang pase and rice with aromatic ginger",
    },
    {
        id: "uuid9",
        type: "Sushi",
        name: "Salmon Mentai Bowls",
        price: 25000,
        purches: 145,
        img: "../asset/images/menu/japan/6df188d8033561c02b106b5dfcbb7610.jpg",
        ingrediance: [
            "onion",
            "gochujang pase",
            "beef",
            "rice",
            "garlic",
            "ginger",
        ],
        description:
            "deep fried beef with onion and gocujang pase and rice with aromatic ginger",
    },
    {
        id: "uuid10",
        type: "Sushi",
        name: "Salmon Mentai Bowls",
        price: 25000,
        purches: 145,
        img: "../asset/images/menu/japan/6df188d8033561c02b106b5dfcbb7610.jpg",
        ingrediance: [
            "onion",
            "gochujang pase",
            "beef",
            "rice",
            "garlic",
            "ginger",
        ],
        description:
            "deep fried beef with onion and gocujang pase and rice with aromatic ginger",
    },
    {
        id: "uuid11",
        type: "Sushi",
        name: "Salmon Mentai Bowls",
        price: 25000,
        purches: 145,
        img: "../asset/images/menu/japan/6df188d8033561c02b106b5dfcbb7610.jpg",
        ingrediance: [
            "onion",
            "gochujang pase",
            "beef",
            "rice",
            "garlic",
            "ginger",
        ],
        description:
            "deep fried beef with onion and gocujang pase and rice with aromatic ginger",
    },
    {
        id: "uuid12",
        type: "Sushi",
        name: "Salmon Mentai Bowls",
        price: 25000,
        purches: 145,
        img: "../asset/images/menu/japan/6df188d8033561c02b106b5dfcbb7610.jpg",
        ingrediance: [
            "onion",
            "gochujang pase",
            "beef",
            "rice",
            "garlic",
            "ginger",
        ],
        description:
            "deep fried beef with onion and gocujang pase and rice with aromatic ginger",
    },
    {
        id: "uuid13",
        type: "Sushi",
        name: "Salmon Mentai Bowls",
        price: 25000,
        purches: 145,
        img: "../asset/images/menu/japan/6df188d8033561c02b106b5dfcbb7610.jpg",
        ingrediance: [
            "onion",
            "gochujang pase",
            "beef",
            "rice",
            "garlic",
            "ginger",
        ],
        description:
            "deep fried beef with onion and gocujang pase and rice with aromatic ginger",
    },
];

function removeSpace(char) {
    return char
        .split("")
        .filter((a) => a !== " ")
        .join("");
}

const addTitleMenu = (type) => {
    return `
     <div class="mt-4 pt-3">
        <h3 class="fs-3 fw-bold">${type}</h3> 
        <div class="wrap px-0 mt-3">
          <div class="carousels" id=${removeSpace(type)}>
          </div>
        </div>

      </div>
  `;
};

const catMenu = document.getElementById("optionMenu");

const types = [...new Set(data.map((a) => a.type))];

types.forEach((element) => {
    catMenu.innerHTML += addTitleMenu(element);
});

function convertPrice(price) {
    let newprice = price.toString().split("").reverse().join("");
    let result = "";
    for (let index = 1; index <= newprice.length; index++) {
        if (index % 3 == 0 && index !== newprice.length) {
            result += newprice[index - 1] + ".";
        } else {
            result += newprice[index - 1];
        }
    }
    return result.split("").reverse().join("");
}

const addModal = (id) => {
    return `
    <div class="modal fade" id=${id} tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
     <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content">
         <div class="modal-header border-0 position-absolute w-100" >
            <button type="button" class="btn-close align-self-end z-1" data-bs-dismiss="modal" aria-label="Close"></button>
         </div>
         <div class="modal-body p-0 position-relative">
            <img class ="object-fit-cover w-100" src=${data
                .filter((a) => a.id === id)
                .map((a) => a.img)
                .join("")} height= "380px">
             
            <h5 class="px-3 pt-3">${data
                .filter((a) => a.id === id)
                .map((a) => a.name)
                .join("")}</h5>
                
            <p class="px-3 pt-1 m-0"><Strong>Ingresiances: </Strong>  ${data
                .filter((a) => a.id === id)
                .map((a) => a.ingrediance)
                .join("")
                .split(",")
                .join(", ")}</p>
            <p class="px-3 pt-1"><strong>Description: </strong> ${data
                .filter((a) => a.id === id)
                .map((a) => a.description)} </p>   

         </div>
         <div class="modal-footer border-0">
          <button type="button" class="border-0 rounded-2 fw-bold">Add to Basket</button>
         </div>
        </div>
     </div>
    </div>
    `;
};

const modals = document.querySelector("#modal");

function findId(id) {
    modals.innerHTML = addModal(id);
}

const addMenu = (img, price, name, id) => {
    return `
        <div class="bg-transparent  mt-2 mx-0 border-0 p-0 content" >
              <div class="card border-0 mb-2" style="width: 15rem;">
                <div class="rounded-4">
                  <img
                    src=${img}
                    class="card-img-top rounded-4 object-fit-cover" alt="food"
                    height="250px">
                </div>

                <div class="card-body mt-0 pt-1">
                  <button
                    class="card-text text-wrap text-start fw-bold text-dark fs-5 mb-0 bg-transparent  mt-2 mx-0 border-0 p-0"
                    style="font-family: hind; line-height: 1.2;"  data-bs-toggle="modal"
                    data-bs-target="#${id}" onClick=findId("${id}")>${name}</button>
                  <p
                    class="card-text text-start text-dark fs-6 fw-medium my-0 pt-1">Rp${convertPrice(
                        price
                    )}</p>
                </div>
              </div>
        </div>
      
    `;
};

data.forEach((element) => {
    const category = document.getElementById(removeSpace(element.type));
    category.innerHTML += addMenu(
        element.img,
        element.price,
        element.name,
        element.id
    );
});

const carousel = document.querySelectorAll(".carousels");

for (let i = 0; i < carousel.length; i++) {
    let isDragStart = false,
        prevPageX,
        prevScrollLeft;

    const dragStart = (e) => {
        // updatating global variables value on mouse down event
        isDragStart = true;
        prevPageX = e.pageX;
        prevScrollLeft = carousel[i].scrollLeft;
    };

    const dragging = (e) => {
        // scrolling images/carousel to left according to mouse pointer
        if (!isDragStart) return;
        e.preventDefault();
        positionDiff = e.pageX - prevPageX;
        carousel[i].scrollLeft = prevScrollLeft - positionDiff;
    };

    const dragStop = () => {
        isDragStart = false;
    };

    carousel[i].addEventListener("mousedown", dragStart);
    document.addEventListener("mousemove", dragging);
    document.addEventListener("mouseup", dragStop);
}
